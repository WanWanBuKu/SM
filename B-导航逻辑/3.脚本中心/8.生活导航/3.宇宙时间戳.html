<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>宇宙时间</title>
    <style>
        :root {
            --bg-color: #050505;
            --text-color: #e0e0e0;
            --active-color: #00f2ff;
            --life-color: #ff9500; /* 一生时间的颜色 - 金橙色 */
            --static-color: #555555;
            --font-mono: 'Courier New', Courier, monospace;
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0; background-color: var(--bg-color); color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex; flex-direction: column; height: 100vh; overflow: hidden;
        }

        header { text-align: center; padding: 15px 0 10px; flex-shrink: 0; background-color: var(--bg-color); z-index: 10; }
        h1 { margin: 0; font-size: 24px; font-weight: 300; letter-spacing: 2px; color: #fff; }
        .subtitle { margin-top: 5px; font-size: 12px; color: var(--static-color); letter-spacing: 0.5px; }

        main { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; padding: 10px 15px; overflow: hidden; }
        
        .digit-grid {
            display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px 4px;
            font-family: var(--font-mono); font-size: 22px; font-weight: bold; text-align: center;
        }

        .digit {
            position: relative; height: 32px; line-height: 32px;
            background: rgba(255, 255, 255, 0.05); border-radius: 4px; transition: color 0.2s;
        }

        .digit:nth-child(3n) { margin-right: 12px; }
        .digit:nth-child(6n) { margin-right: 0; }

        /* 一生时间：前10位 - 金橙色 */
        .digit.life-time { 
            color: var(--life-color); 
            background: rgba(255, 149, 0, 0.1); 
            text-shadow: 0 0 5px rgba(255, 149, 0, 0.4); 
        }
        
        /* 高频跳动区：第11-18位 - 亮青色 */
        .digit.high-freq { color: var(--active-color); background: rgba(0, 242, 255, 0.1); text-shadow: 0 0 5px rgba(0, 242, 255, 0.3); }
        .digit.low-freq { color: var(--static-color); }

        footer {
            padding: 15px; display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.3); flex-shrink: 0; border-top: 1px solid #1a1a1a; backdrop-filter: blur(5px);
        }

        .page-info { font-size: 14px; color: var(--static-color); }
        .pagination-controls { display: flex; gap: 10px; align-items: center; }
        
        button {
            background: transparent; border: 1px solid #444; color: #fff;
            padding: 6px 12px; border-radius: 4px; font-size: 12px; cursor: pointer; transition: all 0.2s;
        }
        button:active { background: rgba(255,255,255,0.1); }
        button.active { border-color: var(--active-color); color: var(--active-color); }

        .status-dot { width: 8px; height: 8px; border-radius: 50%; background-color: #333; display: inline-block; margin-right: 6px; }
        .running .status-dot { background-color: var(--active-color); box-shadow: 0 0 8px var(--active-color); }

        /* 右上角按钮组 */
        .top-buttons {
            position: fixed; top: 10px; right: 10px; z-index: 100;
            display: flex; flex-direction: column; gap: 8px;
        }

        .top-btn {
            padding: 5px 12px; border-radius: 16px;
            background: rgba(0, 242, 255, 0.05);
            border: 1px solid var(--active-color);
            color: var(--active-color);
            cursor: pointer;
            font-size: 12px; font-weight: 600;
            text-decoration: none;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            backdrop-filter: blur(4px);
        }

        .top-btn:hover { background: var(--active-color); color: #000; transform: translateY(-1px); }
        .top-btn:active { transform: translateY(0); }

        /* 弹窗样式 */
        #timestamp-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s ease;
            backdrop-filter: blur(5px);
        }

        #timestamp-modal.active { display: flex; opacity: 1; }

        .modal-content {
            background: #111; border: 1px solid #333; border-radius: 16px; padding: 25px;
            width: 90%; max-width: 420px;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.1);
            transform: scale(0.95); transition: transform 0.3s ease;
            display: flex; flex-direction: column; gap: 15px;
        }

        #timestamp-modal.active .modal-content { transform: scale(1); }

        .modal-title { font-size: 1.2rem; font-weight: 700; color: #fff; text-align: center; margin-bottom: 5px; }

        .example-text {
            font-size: 0.75rem; color: var(--life-color);
            background: rgba(255, 149, 0, 0.1); padding: 8px;
            border-radius: 6px; text-align: center; font-family: var(--font-mono);
            margin-bottom: 10px; border: 1px dashed rgba(255, 149, 0, 0.3);
        }

        .form-group label { display: block; font-size: 0.85rem; color: #aaa; margin-bottom: 6px; font-weight: 500; }
        
        .form-group input {
            width: 100%; padding: 12px;
            background: rgba(255,255,255,0.05); border: 1px solid #333;
            border-radius: 8px; color: var(--active-color);
            font-family: var(--font-mono); font-size: 1rem; letter-spacing: 1px;
            text-align: center; outline: none; transition: border-color 0.3s;
            user-select: text;
        }
        .form-group input:focus { border-color: var(--active-color); box-shadow: 0 0 8px rgba(0, 242, 255, 0.2); }

        .modal-buttons { display: flex; gap: 10px; margin-top: 5px; }
        
        .modal-btn { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.95rem; }
        .modal-btn.confirm { background: var(--active-color); color: #000; }
        .modal-btn.confirm:hover { background: #00c4cf; }
        .modal-btn.cancel { background: #222; color: #888; }
        .modal-btn.cancel:hover { background: #333; color: #fff; }

        .history-list {
            max-height: 150px; overflow-y: auto;
            border-top: 1px solid #333; padding-top: 10px; margin-top: 5px;
        }
        .history-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px 0; border-bottom: 1px solid #222; font-size: 0.85rem;
        }
        .history-name { color: #fff; flex: 1; }
        .history-val { 
            color: var(--static-color); font-family: var(--font-mono); font-size: 0.75rem;
            cursor: pointer; transition: color 0.2s;
        }
        .history-val:hover { color: var(--active-color); }
        .history-empty { text-align: center; color: #444; font-size: 0.8rem; padding: 10px; }
        
        .history-list::-webkit-scrollbar { width: 4px; }
        .history-list::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }

    </style>
</head>
<body>

    <div class="top-buttons">
        <a class="top-btn" href="/B-导航逻辑/1.工具导航/C.日记中心/2_随身博客.html">跳转博客</a>
        <button class="top-btn" onclick="openModal()">记录时间戳</button>
    </div>

    <header>
        <h1>宇宙时间</h1>
        <div class="subtitle">13 800 002 026 年</div>
    </header>

    <main id="grid-container">
        <div class="digit-grid" id="digitGrid"></div>
    </main>

    <footer>
        <div class="status-indicator running" id="statusIndicator">
            <span class="status-dot"></span>
            <span id="speedDisplay">1 次 /秒</span>
        </div>
        <div class="pagination-controls">
            <button onclick="app.prevPage()">&lt;</button>
            <span id="pageIndicator" class="page-info">1/3</span>
            <button onclick="app.nextPage()">&gt;</button>
        </div>
    </footer>

    <div id="timestamp-modal">
        <div class="modal-content">
            <div class="modal-title">记录当前时刻</div>
            <div class="example-text">
                示例：435 196 863 072 000 000
            </div>
            <div class="form-group">
                <label>事件名称</label>
                <input type="text" id="ts-name" placeholder="例如：此时此刻" autocomplete="off">
            </div>
            <div class="form-group">
                <label>当前时间戳 (自动填充)</label>
                <input type="text" id="ts-value" readonly>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn cancel" onclick="closeModal()">取消</button>
                <button class="modal-btn confirm" onclick="saveTimestamp()">确认记录</button>
            </div>
            <div class="history-list" id="historyList">
                <div class="history-empty">暂无记录</div>
            </div>
        </div>
    </div>

    <script>
        class CosmicTimeApp {
            constructor() {
                this.totalDigits = 100;
                this.digitsPerPage = 36;
                this.tickSpeed = 1000;
                this.baseValue = 13800002026n * 365n * 24n * 3600n;
                this.currentValue = 0n;
                this.currentPage = 0;
                this.timer = null;
                this.isRunning = true;
                this.gridEl = document.getElementById('digitGrid');
                this.pageIndicatorEl = document.getElementById('pageIndicator');
                this.statusEl = document.getElementById('statusIndicator');
                this.init();
            }

            init() {
                this.loadState();
                this.renderGrid();
                this.startTimer();
            }

            loadState() {
                const savedValue = localStorage.getItem('cosmic_time_value');
                this.currentValue = savedValue !== null ? BigInt(savedValue) : this.baseValue;
            }

            saveState() {
                localStorage.setItem('cosmic_time_value', this.currentValue.toString());
            }

            startTimer() {
                if (this.timer) clearInterval(this.timer);
                this.isRunning = true;
                this.statusEl.classList.add('running');
                this.timer = setInterval(() => { this.tick(); }, this.tickSpeed);
            }

            stopTimer() {
                if (this.timer) clearInterval(this.timer);
                this.isRunning = false;
                this.statusEl.classList.remove('running');
            }

            toggleTimer() {
                this.isRunning ? this.stopTimer() : this.startTimer();
            }

            tick() {
                this.currentValue += 1n;
                this.saveState();
                this.updateGridDisplay();
            }

            getDisplayDigits() {
                let str = this.currentValue.toString().padStart(this.totalDigits, '0').slice(-this.totalDigits);
                return str.split('').reverse();
            }

            renderGrid() {
                this.gridEl.innerHTML = '';
                const digits = this.getDisplayDigits();
                const start = this.currentPage * this.digitsPerPage;
                const pageDigits = digits.slice(start, start + this.digitsPerPage);
                pageDigits.forEach((digit, index) => {
                    const cell = document.createElement('div');
                    cell.className = 'digit';
                    cell.textContent = digit;
                    this.applyColorStyle(cell, start + index);
                    this.gridEl.appendChild(cell);
                });
                this.updatePaginationInfo();
            }

            updateGridDisplay() {
                const digits = this.getDisplayDigits();
                const start = this.currentPage * this.digitsPerPage;
                const cells = this.gridEl.children;
                for (let i = 0; i < cells.length; i++) {
                    const dataIndex = start + i;
                    if (dataIndex < this.totalDigits) {
                        cells[i].textContent = digits[dataIndex];
                        this.applyColorStyle(cells[i], dataIndex);
                    }
                }
            }

            applyColorStyle(element, globalIndex) {
                element.classList.remove('life-time', 'high-freq', 'low-freq');
                if (globalIndex < 10) {
                    element.classList.add('life-time');
                } else if (globalIndex < 18) {
                    element.classList.add('high-freq');
                } else {
                    element.classList.add('low-freq');
                }
            }

            changePage(delta) {
                const totalPages = Math.ceil(this.totalDigits / this.digitsPerPage);
                let newPage = Math.max(0, Math.min(totalPages - 1, this.currentPage + delta));
                if (newPage !== this.currentPage) {
                    this.currentPage = newPage;
                    this.renderGrid();
                }
            }

            nextPage() { this.changePage(1); }
            prevPage() { this.changePage(-1); }
            updatePaginationInfo() {
                this.pageIndicatorEl.textContent = `${this.currentPage + 1}/${Math.ceil(this.totalDigits / this.digitsPerPage)}`;
            }

            formatNumberWithSpaces(bigIntNum) {
                return bigIntNum.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
            }
        }

        const app = new CosmicTimeApp();
        document.body.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON' || e.target.tagName === 'A' || e.target.closest('.modal-content')) return;
            app.toggleTimer();
        });

        const modal = document.getElementById('timestamp-modal');
        const tsNameInput = document.getElementById('ts-name');
        const tsValueInput = document.getElementById('ts-value');
        const historyListEl = document.getElementById('historyList');

        function openModal() {
            modal.classList.add('active');
            tsNameInput.value = '';
            tsValueInput.value = app.formatNumberWithSpaces(app.currentValue);
            tsNameInput.focus();
            renderHistory();
        }

        function closeModal() { modal.classList.remove('active'); }

        function saveTimestamp() {
            const name = tsNameInput.value.trim() || '未命名时刻';
            const rawValue = tsValueInput.value.replace(/\s/g, '');
            if (!rawValue) return;

            const newRecord = { name, value: rawValue, displayValue: app.formatNumberWithSpaces(BigInt(rawValue)), timestamp: Date.now() };
            const savedData = JSON.parse(localStorage.getItem('cosmic_timestamps') || '[]');
            savedData.unshift(newRecord);
            localStorage.setItem('cosmic_timestamps', JSON.stringify(savedData));
            renderHistory();
            tsNameInput.value = '';
            tsValueInput.value = app.formatNumberWithSpaces(app.currentValue);
        }

        function renderHistory() {
            const savedData = JSON.parse(localStorage.getItem('cosmic_timestamps') || '[]');
            if (savedData.length === 0) {
                historyListEl.innerHTML = '<div class="history-empty">暂无记录</div>';
                return;
            }
            historyListEl.innerHTML = savedData.map(item => `
                <div class="history-item">
                    <span class="history-name">${item.name}</span>
                    <span class="history-val" title="点击复制" onclick="copyToClipboard('${item.value}')">${item.displayValue}</span>
                </div>
            `).join('');
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const el = event.target;
                const originalText = el.textContent;
                el.textContent = '已复制';
                el.style.color = '#00f2ff';
                setTimeout(() => { el.textContent = originalText; el.style.color = ''; }, 1000);
            });
        }

        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
        modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
    </script>
</body>
</html>
