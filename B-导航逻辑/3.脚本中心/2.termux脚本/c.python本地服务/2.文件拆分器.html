<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ä»¶æ‹†åˆ†å·¥å…·</title>
    
        <!-- prism.js è¯­æ³•é«˜äº®   -->
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/1.prism-css-ç™½è‰²ä¸»é¢˜.js"></script>   
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/prism-core.min.js"></script>    <!-- æ ¸å¿ƒæ–‡ä»¶ -->
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/prism-python.min.js"></script>   <!-- Pythonè¯­è¨€æ”¯æŒ -->   
    
     <!-- å¼•å…¥ç¼©æ”¾æ’ä»¶ -->
    <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶å·¥å…·/3.æ’ä»¶_å­—ä½“ç¼©æ”¾.js"></script>
    
    <style>
        /* 1. åŸºç¡€æ ·å¼é‡ç½® */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* 2. é¡µé¢ä¸»ä½“æ ·å¼ - æŸ”å’ŒèƒŒæ™¯ä¸çº¹ç† */
        body { 
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace; 
            /* æŸ”å’Œçš„ç»¿è‰²æ¸å˜èƒŒæ™¯ + ç®€æ´çš„æ–œçº¿çº¹ç† */
            background: 
                repeating-linear-gradient(
                    45deg,
                    rgba(255, 255, 255, 0.03),
                    rgba(255, 255, 255, 0.03) 10px,
                    transparent 10px,
                    transparent 20px
                ),
                repeating-linear-gradient(
                    -45deg,
                    rgba(255, 255, 255, 0.02),
                    rgba(255, 255, 255, 0.02) 10px,
                    transparent 10px,
                    transparent 20px
                ),
                linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 25%, #a5d6a7 50%, #81c784 75%, #66bb6a 100%);
            color: #2c3e50; 
            line-height: 1.6; 
            padding: 20px; 
            min-height: 100vh;
        }
        
        /* 3. ä¸»å®¹å™¨ */
        .container { max-width: 1200px; margin: 0 auto; animation: fadeIn 0.5s ease-in; }
        
        /* 4. é¡µé¢æ ‡é¢˜ */
        h3 { color: #2e7d32; margin-bottom: 30px; font-size: 28px; display: flex; align-items: center; gap: 12px; text-shadow: 0 2px 4px rgba(46, 125, 50, 0.2); animation: slideDown 0.6s ease-out; }
        
        /* 5. ä»£ç å—å®¹å™¨ */
        .code-container { background: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1); border: 1px solid #e1e8ed; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        
        /* 6. ä»£ç å—æ‚¬åœæ•ˆæœ */
        .code-container:hover { transform: translateY(-2px); box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15); }
        
        /* 7. ä»£ç å¤´éƒ¨ */
        .code-header { background: linear-gradient(90deg, #f8f9fa 0%, #e9ecef 100%); padding: 15px 20px; border-bottom: 1px solid #dee2e6; display: flex; justify-content: space-between; align-items: center; }
        
        /* 8. ä»£ç æ ‡é¢˜ */
        .code-title { color: #6c757d; font-size: 14px; font-weight: 600; letter-spacing: 0.5px; }
        
        /* 9. å¤åˆ¶æŒ‰é’® */
        .copy-btn { background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 6px; box-shadow: 0 2px 4px rgba(39, 174, 96, 0.3); }
        
        /* 10. å¤åˆ¶æŒ‰é’®æ‚¬åœæ•ˆæœ */
        .copy-btn:hover { background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%); transform: scale(1.05); box-shadow: 0 4px 8px rgba(39, 174, 96, 0.4); }
        
        /* 11. å¤åˆ¶æŒ‰é’®å·²å¤åˆ¶çŠ¶æ€ */
        .copy-btn.copied { background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); }
        
        /* 12. ä»£ç å†…å®¹åŒº */
        pre { background: #f8f9fa; padding: 20px; overflow-x: auto; font-size: 13px; line-height: 1.5; border-radius: 0 0 12px 12px; margin: 0; }
        
        /* 13. ä»£ç æ ‡ç­¾ */
        code { color: #495057; font-family: inherit; white-space: pre; }
        
        /* 14. åº•éƒ¨ä¿¡æ¯åŒº - æ›´ç´§å‡‘ */
        .info-section { margin-top: 20px; padding: 15px; background: rgba(255, 255, 255, 0.9); border-radius: 12px; backdrop-filter: blur(10px); border: 1px solid #e1e8ed; }
        
        /* 15. ä¿¡æ¯åŒºæ ‡é¢˜ */
        .info-section h2 { color: #27ae60; margin-bottom: 8px; font-size: 18px; }
        
        /* 16. ä¿¡æ¯ç½‘æ ¼å¸ƒå±€ - æ›´ç´§å‡‘ */
        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 12px; margin-top: 10px; }
        
        /* 17. ä¿¡æ¯é¡¹ - æ›´ç´§å‡‘ */
        .info-item { background: rgba(248, 249, 250, 0.9); padding: 10px; border-radius: 8px; border-left: 3px solid #27ae60; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        
        /* 18. ä¿¡æ¯é¡¹æ‚¬åœæ•ˆæœ */
        .info-item:hover { transform: translateX(5px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        
        /* 19. ä¿¡æ¯æ ‡ç­¾ - æ›´ç´§å‡‘ */
        .info-label { color: #6c757d; font-size: 11px; margin-bottom: 3px; text-transform: uppercase; letter-spacing: 0.5px; }
        
        /* 20. ä¿¡æ¯å†…å®¹ - æ›´ç´§å‡‘ */
        .info-content { color: #2c3e50; font-size: 12px; }
        
        /* 21. Toastæç¤º */
        .toast { position: fixed; bottom: 20px; right: 20px; background: #27ae60; color: white; padding: 12px 20px; border-radius: 6px; font-size: 14px; z-index: 1000; opacity: 0; transform: translateY(10px); transition: all 0.3s ease; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }
        
        /* 22. Toastæ˜¾ç¤ºçŠ¶æ€ */
        .toast.show { opacity: 1; transform: translateY(0); }
        
        /* 23. å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) { body { padding: 10px; } pre { padding: 15px; font-size: 12px; } .info-grid { grid-template-columns: 1fr; } }
        
        /* 24. åŠ¨ç”»å®šä¹‰ */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* 25. æ»‘å…¥åŠ¨ç”» */
        @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div class="container">
        <h3>æ–‡ä»¶æ‹†åˆ†å·¥å…·</h3>
        
        <div class="code-container">
            <div class="code-header">
                <span class="code-title">file_splitter.py</span>
                <button class="copy-btn" id="copyBtn">
                    <span>ğŸ“‹</span>
                    <span id="copyBtnText">å¤åˆ¶</span>
                </button>
            </div>
            <pre><code id="codeContent" class="language-python">#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
1. æ–‡ä»¶å: file_splitter.py
2. åŠŸèƒ½: æ–‡ä»¶æ‹†åˆ†å·¥å…· - è¿˜åŸåˆå¹¶çš„æ–‡ä»¶
3. åˆ›å»ºæ—¶é—´: 2025å¹´11æœˆ
4. æè¿°: è§£æåˆå¹¶åçš„æ–‡ä»¶ï¼Œå°†å…¶æ‹†åˆ†ä¸ºåŸå§‹çš„ç‹¬ç«‹æ–‡ä»¶
"""

import os
import re
import sys
from pathlib import Path
from datetime import datetime

# 5. å°è¯•å¯¼å…¥Wordå¤„ç†åº“
try:
    from docx import Document
    DOCX_AVAILABLE = True
except ImportError:
    DOCX_AVAILABLE = False

class FileSplitter:
    """6. æ–‡ä»¶æ‹†åˆ†å™¨"""
    
    def __init__(self):
        self.input_file = ""
        self.output_dir = ""
        
    def display_menu(self):
        """7. æ˜¾ç¤ºä¸»èœå•"""
        print("=" * 60)
        print("           æ–‡ä»¶æ‹†åˆ†å·¥å…·")
        print("=" * 60)
        print("\nè¯·é€‰æ‹©è¦æ‹†åˆ†çš„æ–‡ä»¶ç±»å‹ï¼š")
        print("1. æ‹†åˆ†TXTåˆå¹¶æ–‡ä»¶")
        print("2. æ‹†åˆ†Pythonåˆå¹¶æ–‡ä»¶")
        print("3. æ‹†åˆ†é™¤HTMLå¤–æ‰€æœ‰æ–‡ä»¶çš„åˆå¹¶")
        print("4. æ‹†åˆ†DOCXåˆå¹¶æ–‡ä»¶ï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰")
        print("q. é€€å‡ºç¨‹åº")
        
    def get_user_choice(self):
        """8. è·å–ç”¨æˆ·é€‰æ‹©"""
        self.display_menu()
        
        while True:
            choice = input("\nè¯·è¾“å…¥é€‰æ‹© (1/2/3/4/q): ").strip()
            
            if choice.lower() == 'q':
                return None
            
            if choice in ['1', '2', '3', '4']:
                if choice == '4' and not DOCX_AVAILABLE:
                    print("âŒ DOCXæ‹†åˆ†åŠŸèƒ½ä¸å¯ç”¨ï¼Œè¯·å…ˆå®‰è£…åº“ï¼š")
                    print("   pip install python-docx")
                    continue
                return choice
            
            print("âŒ æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥ï¼")
    
    def get_input_file(self):
        """9. è·å–è¾“å…¥æ–‡ä»¶è·¯å¾„"""
        default_file = "/storage/emulated/0/Download/åˆå¹¶_TXTæ–‡ä»¶.txt"
        
        print(f"\nè¯·è¾“å…¥è¦æ‹†åˆ†çš„æ–‡ä»¶è·¯å¾„ï¼š")
        print(f"ï¼ˆç›´æ¥å›è½¦ä½¿ç”¨é»˜è®¤æ–‡ä»¶: {default_file}ï¼‰")
        
        while True:
            user_input = input("> ").strip()
            
            if not user_input:
                self.input_file = default_file
            else:
                self.input_file = user_input
            
            if os.path.exists(self.input_file):
                print(f"âœ… ä½¿ç”¨æ–‡ä»¶: {self.input_file}")
                return True
            else:
                print(f"âŒ æ–‡ä»¶ä¸å­˜åœ¨: {self.input_file}")
                print("è¯·é‡æ–°è¾“å…¥æˆ–æŒ‰ Ctrl+C é€€å‡º")
    
    def get_output_directory(self):
        """10. è·å–è¾“å‡ºç›®å½•"""
        # åŸºäºè¾“å…¥æ–‡ä»¶ååˆ›å»ºè¾“å‡ºç›®å½•
        input_path = Path(self.input_file)
        base_name = input_path.stem
        parent_dir = input_path.parent
        
        default_output = parent_dir / f"{base_name}_æ‹†åˆ†ç»“æœ"
        
        print(f"\nè¯·è¾“å…¥æ‹†åˆ†æ–‡ä»¶çš„è¾“å‡ºç›®å½•ï¼š")
        print(f"ï¼ˆç›´æ¥å›è½¦ä½¿ç”¨é»˜è®¤ç›®å½•: {default_output}ï¼‰")
        
        while True:
            user_input = input("> ").strip()
            
            if not user_input:
                self.output_dir = str(default_output)
            else:
                self.output_dir = user_input
            
            # åˆ›å»ºè¾“å‡ºç›®å½•
            try:
                os.makedirs(self.output_dir, exist_ok=True)
                print(f"âœ… è¾“å‡ºç›®å½•: {self.output_dir}")
                return True
            except Exception as e:
                print(f"âŒ æ— æ³•åˆ›å»ºç›®å½• {self.output_dir}: {e}")
                print("è¯·é‡æ–°è¾“å…¥")
    
    def parse_text_merged_file(self, file_path):
        """11. è§£ææ–‡æœ¬åˆå¹¶æ–‡ä»¶çš„ç»“æ„"""
        files_info = []
        current_file = None
        content_lines = []
        reading_content = False
        
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                lines = f.readlines()
        except UnicodeDecodeError:
            try:
                with open(file_path, 'r', encoding='gbk') as f:
                    lines = f.readlines()
            except:
                print("âŒ æ— æ³•è¯»å–æ–‡ä»¶ï¼Œç¼–ç ä¸æ”¯æŒ")
                return []
        
        for line in lines:
            line = line.rstrip('\n\r')
            
            # æ£€æµ‹æ–‡ä»¶åˆ†éš”ç¬¦
            if line.startswith('--- ') and ' â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸ ---' in line:
                # ä¿å­˜å‰ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹
                if current_file and content_lines:
                    current_file['content'] = '\n'.join(content_lines)
                    files_info.append(current_file)
                
                # å¼€å§‹æ–°æ–‡ä»¶
                filename = line.replace('--- ', '').replace(' â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸ ---', '').strip()
                current_file = {
                    'filename': filename,
                    'size': 0,
                    'mod_time': '',
                    'content': ''
                }
                content_lines = []
                reading_content = False
                continue
            
            # æ£€æµ‹æ–‡ä»¶ä¿¡æ¯
            if current_file and not reading_content:
                if line.startswith('æ–‡ä»¶å¤§å°:'):
                    current_file['size'] = line.split(':', 1)[1].strip().replace(' å­—èŠ‚', '')
                elif line.startswith('ä¿®æ”¹æ—¶é—´:'):
                    current_file['mod_time'] = line.split(':', 1)[1].strip()
                elif line == '-------------------------':
                    reading_content = True
                continue
            
            # æ”¶é›†æ–‡ä»¶å†…å®¹
            if reading_content and current_file:
                content_lines.append(line)
        
        # ä¿å­˜æœ€åä¸€ä¸ªæ–‡ä»¶
        if current_file and content_lines:
            current_file['content'] = '\n'.join(content_lines)
            files_info.append(current_file)
        
        return files_info
    
    def split_text_files(self):
        """12. æ‹†åˆ†æ–‡æœ¬åˆå¹¶æ–‡ä»¶"""
        print("\nğŸ”„ æ­£åœ¨è§£æåˆå¹¶æ–‡ä»¶ç»“æ„...")
        
        # è§£ææ–‡ä»¶ç»“æ„
        files_info = self.parse_text_merged_file(self.input_file)
        
        if not files_info:
            print("âŒ æœªèƒ½è§£æå‡ºä»»ä½•æ–‡ä»¶ä¿¡æ¯")
            return False
        
        print(f"ğŸ“ å‘ç° {len(files_info)} ä¸ªæ–‡ä»¶ï¼Œå¼€å§‹æ‹†åˆ†...")
        
        success_count = 0
        
        for i, file_info in enumerate(files_info, 1):
            try:
                filename = file_info['filename']
                content = file_info['content']
                
                output_path = os.path.join(self.output_dir, filename)
                
                # å†™å…¥æ–‡ä»¶
                with open(output_path, 'w', encoding='utf-8') as f:
                    f.write(content)
                
                # å°è¯•è®¾ç½®æ–‡ä»¶æ—¶é—´ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
                if file_info['mod_time']:
                    try:
                        mod_time = datetime.strptime(file_info['mod_time'], '%Y-%m-%d %H:%M:%S')
                        timestamp = mod_time.timestamp()
                        os.utime(output_path, (timestamp, timestamp))
                    except:
                        pass  # å¿½ç•¥æ—¶é—´è®¾ç½®é”™è¯¯
                
                print(f"âœ… {i:2d}. {filename}")
                success_count += 1
                
            except Exception as e:
                print(f"âŒ {i:2d}. {file_info['filename']} - é”™è¯¯: {e}")
        
        print(f"\nğŸ‰ æ‹†åˆ†å®Œæˆï¼æˆåŠŸ: {success_count}/{len(files_info)}")
        print(f"ğŸ“‚ è¾“å‡ºç›®å½•: {self.output_dir}")
        return True
    
    def split_docx_files(self):
        """13. æ‹†åˆ†DOCXåˆå¹¶æ–‡ä»¶ï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰"""
        if not DOCX_AVAILABLE:
            print("âŒ DOCXæ‹†åˆ†åŠŸèƒ½ä¸å¯ç”¨")
            return False
        
        try:
            print("\nğŸ”„ æ­£åœ¨è§£æDOCXåˆå¹¶æ–‡ä»¶...")
            doc = Document(self.input_file)
            
            files_info = []
            current_file = None
            current_content = []
            
            for paragraph in doc.paragraphs:
                text = paragraph.text.strip()
                
                # æ£€æµ‹æ–‡ä»¶åˆ†éš”ç¬¦
                if text.startswith('--- ') and ' â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸ ---' in text:
                    # ä¿å­˜å‰ä¸€ä¸ªæ–‡ä»¶
                    if current_file and current_content:
                        current_file['content'] = '\n'.join(current_content)
                        files_info.append(current_file)
                    
                    # å¼€å§‹æ–°æ–‡ä»¶
                    filename = text.replace('--- ', '').replace(' â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸ ---', '').strip()
                    current_file = {'filename': filename, 'content': ''}
                    current_content = []
                    continue
                
                # æ”¶é›†å†…å®¹ï¼ˆè·³è¿‡åˆ†éš”çº¿ç­‰ï¼‰
                if current_file and text and text != '-------------------------':
                    current_content.append(text)
            
            # ä¿å­˜æœ€åä¸€ä¸ªæ–‡ä»¶
            if current_file and current_content:
                current_file['content'] = '\n'.join(current_content)
                files_info.append(current_file)
            
            if not files_info:
                print("âŒ æœªèƒ½è§£æå‡ºä»»ä½•æ–‡ä»¶ä¿¡æ¯")
                return False
            
            print(f"ğŸ“ å‘ç° {len(files_info)} ä¸ªæ–‡ä»¶ï¼Œå¼€å§‹æ‹†åˆ†...")
            
            success_count = 0
            for i, file_info in enumerate(files_info, 1):
                try:
                    filename = file_info['filename']
                    content = file_info['content']
                    
                    # ç¡®ä¿æœ‰æ‰©å±•å
                    if not '.' in filename:
                        filename += '.txt'
                    
                    output_path = os.path.join(self.output_dir, filename)
                    
                    with open(output_path, 'w', encoding='utf-8') as f:
                        f.write(content)
                    
                    print(f"âœ… {i:2d}. {filename}")
                    success_count += 1
                    
                except Exception as e:
                    print(f"âŒ {i:2d}. {file_info['filename']} - é”™è¯¯: {e}")
            
            print(f"\nğŸ‰ æ‹†åˆ†å®Œæˆï¼æˆåŠŸ: {success_count}/{len(files_info)}")
            print(f"ğŸ“‚ è¾“å‡ºç›®å½•: {self.output_dir}")
            return True
            
        except Exception as e:
            print(f"âŒ æ‹†åˆ†DOCXæ–‡ä»¶æ—¶å‡ºé”™: {e}")
            return False
    
    def run_split(self, choice):
        """14. æ‰§è¡Œæ‹†åˆ†æ“ä½œ"""
        # æ ¹æ®é€‰æ‹©æ‰§è¡Œä¸åŒçš„æ‹†åˆ†
        if choice == "4":  # DOCXæ–‡ä»¶
            print(f"\nğŸ”„ å¼€å§‹æ‹†åˆ†DOCXæ–‡ä»¶...")
            success = self.split_docx_files()
        else:  # æ–‡æœ¬æ–‡ä»¶
            print(f"\nğŸ”„ å¼€å§‹æ‹†åˆ†æ–‡æœ¬æ–‡ä»¶...")
            success = self.split_text_files()
        
        if success:
            print("\nâœ¨ æ‹†åˆ†ä»»åŠ¡å®Œæˆï¼")
            return True
        else:
            print("\nâŒ æ‹†åˆ†å¤±è´¥ï¼")
            return False

def main():
    """15. ä¸»å‡½æ•°"""
    splitter = FileSplitter()
    
    # è·å–ç”¨æˆ·é€‰æ‹©
    choice = splitter.get_user_choice()
    if choice is None:
        print("ğŸ‘‹ ç¨‹åºå·²é€€å‡º")
        return
    
    # è·å–è¾“å…¥æ–‡ä»¶
    if not splitter.get_input_file():
        return
    
    # è·å–è¾“å‡ºç›®å½•
    if not splitter.get_output_directory():
        return
    
    # æ‰§è¡Œæ‹†åˆ†
    splitter.run_split(choice)

if __name__ == "__main__":
    main()</code></pre>
        </div>
        
        <div class="info-section">
            <h2>ğŸ“‹ è„šæœ¬åŠŸèƒ½</h2>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">ğŸ¯ åŠŸèƒ½</div>
                    <div class="info-content">è§£æåˆå¹¶åçš„æ–‡ä»¶ï¼Œå°†å…¶æ‹†åˆ†ä¸ºåŸå§‹çš„ç‹¬ç«‹æ–‡ä»¶</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ“ è¾“å‡º</div>
                    <div class="info-content">åœ¨æŒ‡å®šç›®å½•ä¸‹åˆ›å»ºæ‹†åˆ†åçš„æ–‡ä»¶</div>
                </div>
                <div class="info-item">
                    <div class="info-label">âš¡ ç‰¹æ€§</div>
                    <div class="info-content">æ”¯æŒTXTã€Pythonã€DOCXæ–‡ä»¶æ‹†åˆ†ï¼Œä¿ç•™åŸå§‹æ–‡ä»¶ä¿¡æ¯</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ› ï¸ ä¾èµ–</div>
                    <div class="info-content">DOCXæ‹†åˆ†éœ€è¦å®‰è£… python-docx</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast æç¤º -->
    <div class="toast" id="toast"></div>

    <script>
        // 1. å¤åˆ¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶å¤„ç†
        document.getElementById('copyBtn').addEventListener('click', function() {
            const copyBtn = this;
            const copyBtnText = document.getElementById('copyBtnText');
            const toast = document.getElementById('toast');
            
            // è·å–çº¯æ–‡æœ¬å†…å®¹ï¼ˆå»é™¤HTMLæ ‡ç­¾ï¼‰
            const codeElement = document.getElementById('codeContent');
            const textContent = codeElement.textContent || codeElement.innerText;
            
            // ä½¿ç”¨ç°ä»£APIå¤åˆ¶
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(textContent).then(function() {
                    // æ˜¾ç¤ºæˆåŠŸæç¤º
                    handleCopySuccess(copyBtn, copyBtnText, toast);
                }).catch(function(err) {
                    showCopyError(copyBtn, copyBtnText, toast);
                });
            } else {
                // å¤‡ç”¨æ–¹æ³•
                fallbackCopy(textContent, copyBtn, copyBtnText, toast);
            }
        });
        
        // 2. å¤„ç†å¤åˆ¶æˆåŠŸ
        function handleCopySuccess(copyBtn, copyBtnText, toast) {
            copyBtn.classList.add('copied');
            copyBtnText.textContent = 'å·²å¤åˆ¶';
            
            // æ˜¾ç¤ºtoast
            toast.textContent = 'âœ… è„šæœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿';
            toast.classList.add('show');
            
            // 2ç§’åæ¢å¤æŒ‰é’®çŠ¶æ€
            setTimeout(function() {
                copyBtn.classList.remove('copied');
                copyBtnText.textContent = 'å¤åˆ¶';
            }, 2000);
            
            // 3ç§’åéšè—toast
            setTimeout(function() {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // 3. å¤‡ç”¨å¤åˆ¶æ–¹æ³•
        function fallbackCopy(text, copyBtn, copyBtnText, toast) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    handleCopySuccess(copyBtn, copyBtnText, toast);
                } else {
                    showCopyError(copyBtn, copyBtnText, toast);
                }
            } catch (err) {
                showCopyError(copyBtn, copyBtnText, toast);
            }
            
            document.body.removeChild(textArea);
        }
        
        // 4. æ˜¾ç¤ºå¤åˆ¶é”™è¯¯
        function showCopyError(copyBtn, copyBtnText, toast) {
            // æ˜¾ç¤ºé”™è¯¯æç¤º
            toast.textContent = 'âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å¤åˆ¶';
            toast.style.background = '#e74c3c';
            toast.classList.add('show');
            
            // 3ç§’åéšè—toast
            setTimeout(function() {
                toast.classList.remove('show');
                toast.style.background = '#27ae60';
            }, 3000);
        }
    </script>
</body>
</html>
