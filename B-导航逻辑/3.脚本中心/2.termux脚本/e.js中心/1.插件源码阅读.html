<!DOCTYPE html> 
<html lang="zh-CN"> 
<head>
<meta charset="UTF-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>æ’ä»¶æºç æŸ¥çœ‹å™¨</title> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" id="prism-theme">

    <!-- å¼•å…¥ç¼©æ”¾æ’ä»¶ -->
    <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶å·¥å…·/3.æ’ä»¶_å­—ä½“ç¼©æ”¾.js"></script> 
    
<style>
/* 1. æ ¹å…ƒç´ CSS å˜é‡å®šä¹‰ - æŸ”å’Œè“ç»¿è‰²ç³»*/
:root {
    --primary-color: #0891b2; /* æŸ”å’Œé’è“è‰² */
    --secondary-color: #0e7490; /* æ·±é’è“è‰² */
    --accent-color: #06b6d4; /* äº®é’è“è‰² */
    --code-bg: #0f172a; /* æ·±è“ç°è‰²èƒŒæ™¯ */
    --text-color: #e0f2fe; /* æµ…è“è‰²æ–‡å­— */
    --border-color: #1e3a8a; /* æ·±è“è‰²è¾¹æ¡† */
    --card-bg: rgba(6, 182, 212, 0.1); /* åŠé€æ˜é’è“è‰² */
    --base-font-size: 1rem; 
    --header-height: 5.625rem; /* 90px å¢åŠ é«˜åº¦ä»¥å®¹çº³ä¸¤è¡Œå†…å®¹ */
}

/* 2. å…¨å±€é‡ç½®æ ·å¼*/
* {
    margin: 0; 
    padding: 0; 
    box-sizing: border-box;
}

/* 3. HTML æ ¹å…ƒç´ è®¾ç½®*/
html {
    font-size: 16px; /* åŸºå‡†å­—ä½“å¤§å°ï¼Œ1rem = 16px */
}

/* 4. é¡µé¢ä¸»ä½“æ ·å¼ - æŸ”å’Œæ¸å˜èƒŒæ™¯*/
body {
    font-family: 'SF Mono', 'Fira Code', 'Consolas', 'Menlo', monospace; 
    background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 40%, #0891b2 100%);
    min-height: 100vh; 
    color: var(--text-color); 
    position: relative;
    overflow-x: hidden;
}

/* 5. åŠ¨æ€èƒŒæ™¯ä¼ªå…ƒç´  - æŸ”å’Œè‰²å½©*/
body::before {
    content: ''; 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background:
        radial-gradient(circle at 25% 35%, rgba(8, 145, 178, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 75% 65%, rgba(6, 182, 212, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(14, 116, 144, 0.08) 0%, transparent 50%);
    background-size: 5rem 5rem, 3.75rem 3.75rem, 4.375rem 4.375rem;
    animation: backgroundFloat 30s linear infinite; 
    z-index: 0;
}

/* 6. èƒŒæ™¯åŠ¨ç”»å…³é”®å¸§*/
@keyframes backgroundFloat {
    0% { transform: translate(0, 0) rotate(0deg); } 
    100% { transform: translate(-2.5rem, -2.5rem) rotate(-360deg); }
}

/* 7. ä¸»å®¹å™¨æ ·å¼*/
.container {
    position: relative; 
    z-index: 1; 
    min-height: 100vh; 
    display: flex; 
    flex-direction: column; 
    padding: 0;
}

/* 8. é¡µé¢å¤´éƒ¨æ ·å¼*/
.header {
    background: rgba(15, 23, 42, 0.95); /* æ·±è“ç°è‰²åŠé€æ˜èƒŒæ™¯ */
    backdrop-filter: blur(20px);
    padding: 0.5rem 0.625rem; 
    border-bottom: 0.0625rem solid var(--border-color); 
    display: flex; 
    flex-direction: column; /* æ”¹ä¸ºå‚ç›´å¸ƒå±€ */
    justify-content: space-between; 
    position: sticky; 
    top: 0; 
    z-index: 100; 
    box-shadow: 0 0.125rem 0.625rem rgba(8, 145, 178, 0.3); 
    height: var(--header-height);
}

/* 9. å¤´éƒ¨ç¬¬ä¸€è¡Œ - æ ‡é¢˜å’Œæ§åˆ¶æŒ‰é’®*/
.header-top {
    display: flex; 
    justify-content: space-between; 
    align-items: center;
    margin-bottom: 0.375rem;
}

/* 10. å¤´éƒ¨å†…å®¹åŒºåŸŸ*/
.header-content {
    display: flex; 
    flex-direction: column; 
    align-items: flex-start;
}

/* 11. å¤´éƒ¨æ ‡é¢˜æ ·å¼*/
.header h1 {
    font-size: 1rem; 
    font-weight: 700; 
    background: linear-gradient(135deg, var(--primary-color), var(--accent-color), var(--secondary-color));
    -webkit-background-clip: text; 
    -webkit-text-fill-color: transparent; 
    background-clip: text; 
    letter-spacing: 0.03125rem; 
    line-height: 1.2;
}

/* 12. æ–¹å‘æç¤ºæ–‡å­—*/
.orientation-hint {
    font-size: 0.625rem; 
    color: var(--accent-color); 
    opacity: 0.8; 
    margin-top: 0.125rem;
}

/* 13. æ§åˆ¶æŒ‰é’®å®¹å™¨*/
.code-controls {
    display: flex; 
    gap: 0.375rem;
    flex-wrap: wrap;
}

/* 14. æ§åˆ¶æŒ‰é’®åŸºç¡€æ ·å¼*/
.control-btn {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white; 
    border: none; 
    padding: 0.375rem 0.5rem; 
    border-radius: 0.5rem; 
    cursor: pointer; 
    font-size: 0.5625rem; 
    font-weight: 500; 
    transition: all 0.3s ease; 
    display: flex; 
    align-items: center; 
    gap: 0.1875rem; 
    white-space: nowrap; 
    box-shadow: 0 0.125rem 0.5rem rgba(8, 145, 178, 0.3);
}

/* 15. æ§åˆ¶æŒ‰é’®æ‚¬åœæ•ˆæœ*/
.control-btn:hover {
    transform: translateY(-0.125rem); 
    box-shadow: 0 0.25rem 0.75rem rgba(8, 145, 178, 0.5);
}

/* 16. æ§åˆ¶æŒ‰é’®æ¿€æ´»æ•ˆæœ*/
.control-btn:active {
    transform: translateY(-0.0625rem);
}

/* 17. æ§åˆ¶æŒ‰é’®é€‰ä¸­çŠ¶æ€*/
.control-btn.active {
    background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
    box-shadow: 0 0 0.9375rem rgba(6, 182, 212, 0.6);
}

/* 18. æ–‡ä»¶åˆ‡æ¢æ ‡ç­¾æ  - å•ç‹¬ä¸€è¡Œï¼Œå­—ä½“ç¨å¤§*/
.file-tabs-container {
    display: flex; 
    justify-content: center; /* å±…ä¸­æ˜¾ç¤º */
    padding: 0.25rem 0;
}

.file-tabs {
    display: flex; 
    gap: 0.5rem; /* å¢åŠ é—´è· */
    overflow-x: auto; 
    scrollbar-width: none; 
    -ms-overflow-style: none;
}

.file-tabs::-webkit-scrollbar {
    display: none;
}

.file-tab {
    background: rgba(8, 145, 178, 0.2); /* æ›´æ˜æ˜¾çš„èƒŒæ™¯è‰² */
    color: var(--accent-color); 
    border: 0.0625rem solid var(--border-color); 
    padding: 0.375rem 0.75rem; /* å¢åŠ å†…è¾¹è· */
    border-radius: 0.5rem; /* ç¨å¾®åœ†æ¶¦ä¸€äº› */
    cursor: pointer; 
    font-size: 0.6875rem; /* å­—ä½“ç¨å¤§ */
    font-weight: 600; /* å­—ä½“åŠ ç²— */
    white-space: nowrap; 
    transition: all 0.3s ease; 
    flex-shrink: 0;
    min-width: 4rem; /* æœ€å°å®½åº¦ */
    text-align: center;
}

.file-tab.active {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); 
    color: white; 
    border-color: var(--primary-color); 
    box-shadow: 0 0.125rem 0.5rem rgba(8, 145, 178, 0.5);
    transform: scale(1.05); /* æ¿€æ´»æ—¶ç¨å¾®æ”¾å¤§ */
}

/* 19. ä¸»å†…å®¹å®¹å™¨*/
.main-container {
    flex: 1; 
    display: flex;
    flex-direction: column; 
    padding: 0; 
    max-width: 100%;
}

/* 20. ä»£ç å±•ç¤ºåŒºåŸŸ*/
.code-view {
    display: flex; 
    flex: 1; 
    flex-direction: column;
}

/* 21. ä»£ç å®¹å™¨æ ·å¼*/
.code-container {
    flex: 1; 
    background: var(--code-bg); 
    overflow: auto; 
    height: calc(100vh - var(--header-height)); 
    border: none; 
    padding: 0.9375rem; 
    width: 100%;
    scroll-behavior: smooth; /* å¹³æ»‘æ»šåŠ¨ */
}

/* 22. ä»£ç å—æ ·å¼*/
pre[class*="language-"] {
    font-size: var(--base-font-size); 
    transition: font-size 0.3s ease; 
    margin: 0; 
    padding: 0.9375rem; 
    border-radius: 0;
}

/* 23. åŠ è½½æç¤ºæ ·å¼*/
.loading {
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 12.5rem; 
    color: #94a3b8; 
    font-size: 1.125rem;
}

/* 24. Toast æç¤ºæ¡†æ ·å¼*/
.toast {
    position: fixed; 
    bottom: 1.25rem; 
    left: 50%; 
    transform: translateX(-50%); 
    background: rgba(15, 23, 42, 0.95); /* æ·±è“ç°è‰²èƒŒæ™¯ */
    color: white; 
    padding: 0.625rem 1.25rem; 
    border-radius: 1.25rem; 
    font-size: 0.75rem; 
    z-index: 1000; 
    opacity: 0; 
    transition: opacity 0.3s ease; 
    box-shadow: 0 0.1875rem 0.9375rem rgba(8, 145, 178, 0.4);
    border: 0.0625rem solid var(--border-color); /* æ·»åŠ è¾¹æ¡† */
}

/* 25. Toast æ˜¾ç¤ºçŠ¶æ€*/
.toast.show {
    opacity: 1;
}

/* 26. æ‰‹æœºç«¯é€‚é…*/
@media (max-width: 768px) {
    html {
        font-size: 14px; /* ç§»åŠ¨ç«¯åŸºå‡†å­—ä½“å¤§å°*/
    }
    .header {
        padding: 0.375rem 0.5rem; 
        height: 5rem; /* 80px */
    }
    .header h1 {
        font-size: 0.875rem;
    }
    .orientation-hint {
        font-size: 0.5625rem;
    }
    .file-tab {
        font-size: 0.625rem; /* ç§»åŠ¨ç«¯ç¨å°ä½†ä»ç„¶æ¸…æ™° */
        padding: 0.3125rem 0.625rem;
        min-width: 3.5rem;
    }
    .control-btn {
        padding: 0.3125rem 0.375rem; 
        font-size: 0.5rem;
    }
    .code-container {
        padding: 0.625rem; 
        height: calc(100vh - 5rem);
    }
    pre[class*="language-"] {
        font-size: var(--base-font-size); 
        padding: 0.625rem;
    }
}

/* 27. è¶…å°å±å¹•é€‚é…*/
@media (max-width: 480px) {
    html {
        font-size: 12px; /* æ›´å°å±å¹•åŸºå‡†å­—ä½“å¤§å°*/
    }
    .header {
        height: 4.5rem; /* 72px */
    }
    .code-container {
        height: calc(100vh - 4.5rem);
    }
    .file-tab {
        font-size: 0.5625rem;
        padding: 0.25rem 0.5rem;
        min-width: 3rem;
    }
}
</style> 
</head> 
<body>
<div class="container">
<div class="header">
<!-- å¤´éƒ¨ç¬¬ä¸€è¡Œï¼šæ ‡é¢˜å’Œæ§åˆ¶æŒ‰é’® -->
<div class="header-top">
<div class="header-content">
<h1>ã€Œæ’ä»¶æºç æŸ¥çœ‹å™¨ã€</h1> 
<div class="orientation-hint">è¯·æ¨ªå±é˜…è¯»</div> 
</div> 
<div class="code-controls">
<button class="control-btn" onclick="adjustZoom(-2)">ğŸ”-</button>
<button class="control-btn" onclick="adjustZoom(2)">ğŸ”+</button>
<button class="control-btn" onclick="resetZoom()">ğŸ”„</button>
<button class="control-btn" onclick="cycleTheme()">ğŸ¨</button>
<button class="control-btn" onclick="copyCode()">ğŸ“‹ å¤åˆ¶</button>
</div>
</div>
<!-- å¤´éƒ¨ç¬¬äºŒè¡Œï¼šæ–‡ä»¶åˆ‡æ¢æ ‡ç­¾æ  -->
<div class="file-tabs-container">
<div class="file-tabs">
    <button class="file-tab active" data-index="0" onclick="switchToFile(0)">ä¸»é¡µ</button>
    <button class="file-tab" data-index="1" onclick="switchToFile(1)">åœ¨çº¿</button>
    <button class="file-tab" data-index="2" onclick="switchToFile(2)">å­—ä½“</button>
    <button class="file-tab" data-index="3" onclick="switchToFile(3)">é¡µé¢</button>
</div>
</div>
</div> 
<div class="main-container">
<!-- ä»£ç æŸ¥çœ‹åŒºåŸŸ-->
<div class="code-view" id="codeView">
<div class="code-container" id="codeContainer">
<div class="loading">æ­£åœ¨åŠ è½½ä»£ç ...</div> 
</div> 
</div> 
</div> 
</div>
<!-- Toast æç¤º-->
<div class="toast" id="toast"></div>
<script>
// å…¨å±€å˜é‡
let currentFontSize = 1; // 1rem
let currentCode = ''; 
let fileContents = []; // å­˜å‚¨æ‰€æœ‰æ–‡ä»¶å†…å®¹
let pageSourceCode = ''; 
let prismLoaded = false; 
let currentThemeIndex = 0;
let currentViewMode = 'external'; // 'external' æˆ–'page'
let currentFileIndex = 0; // å½“å‰æ˜¾ç¤ºçš„æ–‡ä»¶ç´¢å¼•

// æ–‡ä»¶è·¯å¾„é…ç½®
const filePaths = [
    '/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶å·¥å…·/1.æ’ä»¶_ä¸»é¡µè·³è½¬.js',
    '/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶å·¥å…·/2.æ’ä»¶_åœ¨çº¿æ—¶é•¿.js',
    '/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶å·¥å…·/3.æ’ä»¶_å­—ä½“ç¼©æ”¾.js'
];

// æ–‡ä»¶åç§°é…ç½® - ç®€åŒ–åç§°
const fileNames = ['ä¸»é¡µ', 'åœ¨çº¿', 'å­—ä½“', 'é¡µé¢'];

// é«˜äº®ä¸»é¢˜é…ç½® 
const themes = [
    { name: 'Tomorrow Night', url: 'prism-tomorrow.min.css' },
    { name: 'Dark', url: 'prism-dark.min.css' }, 
    { name: 'Okaidia', url: 'prism-okaidia.min.css' }, 
    { name: 'VSC Dark Plus', url: 'prism-vsc-dark-plus.min.css' }, 
    { name: 'Atom Dark', url: 'prism-atom-dark.min.css' }, 
    { name: 'Synthwave 84', url: 'prism-synthwave84.min.css' }, 
    { name: 'Dracula', url: 'prism-dracula.min.css' }, 
    { name: 'Material Dark', url: 'prism-material-dark.min.css' } 
];

/* 1. é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œçš„åˆå§‹åŒ–å‡½æ•°*/
window.onload = async function () {
    try {
        // åŠ è½½ä¸‰ä¸ªå¤–éƒ¨æ–‡ä»¶
        for (const path of filePaths) {
            const response = await fetch(path);
            if (!response.ok) {
                throw new Error(`æ— æ³•åŠ è½½æ–‡ä»¶: ${path}`);
            }
            fileContents.push(await response.text());
        }
        
        // è·å–é¡µé¢æºä»£ç 
        pageSourceCode = await getPageSource();
        fileContents.push(pageSourceCode); // æ·»åŠ åˆ°æ–‡ä»¶åˆ—è¡¨
        
        // åŠ è½½Prism.js
        if (!prismLoaded) {
            await loadPrism();
            prismLoaded = true;
        }
        
        // æ˜¾ç¤ºé»˜è®¤æ–‡ä»¶ï¼ˆç¬¬ä¸€ä¸ªï¼‰
        displayFile(0);
        showToast('ä»£ç åŠ è½½å®Œæˆ');
        
        // åˆå§‹åŒ–è§¦æ‘¸æ»‘åŠ¨
        initSwipeGestures();
    } catch (error) {
        console.error('åˆå§‹åŒ–å¤±è´¥:', error);
        showToast('åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
    }
};

/* 2. æ˜¾ç¤ºæŒ‡å®šç´¢å¼•çš„æ–‡ä»¶*/
function displayFile(index) {
    currentFileIndex = index;
    currentCode = fileContents[index];
    
    // æ›´æ–°è§†å›¾æ¨¡å¼ï¼ˆç”¨äºè¯­è¨€æ£€æµ‹ï¼‰
    currentViewMode = (index === 3) ? 'page' : 'external';
    
    // æ˜¾ç¤ºä»£ç 
    displayCode();
    
    // æ›´æ–°æ ‡ç­¾çŠ¶æ€
    document.querySelectorAll('.file-tab').forEach((tab, i) => {
        tab.classList.toggle('active', i === index);
    });
    
    showToast(`å·²åˆ‡æ¢åˆ°: ${fileNames[index]}`);
}

/* 3. æ–‡ä»¶åˆ‡æ¢å‡½æ•°*/
function switchToFile(index) {
    if (index >= 0 && index < fileContents.length) {
        displayFile(index);
    }
}

/* 4. åˆå§‹åŒ–è§¦æ‘¸æ‰‹åŠ¿*/
function initSwipeGestures() {
    const codeContainer = document.getElementById('codeContainer');
    let touchStartX = 0;
    let touchEndX = 0;
    
    codeContainer.addEventListener('touchstart', e => {
        touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });
    
    codeContainer.addEventListener('touchend', e => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    }, { passive: true });
    
    function handleSwipe() {
        const swipeThreshold = 50; // æœ€å°æ»‘åŠ¨è·ç¦»
        const diff = touchStartX - touchEndX;
        
        if (Math.abs(diff) > swipeThreshold) {
            if (diff > 0 && currentFileIndex < fileContents.length - 1) {
                // å‘å·¦æ»‘åŠ¨ï¼Œæ˜¾ç¤ºä¸‹ä¸€ä¸ªæ–‡ä»¶
                displayFile(currentFileIndex + 1);
            } else if (diff < 0 && currentFileIndex > 0) {
                // å‘å³æ»‘åŠ¨ï¼Œæ˜¾ç¤ºä¸Šä¸€ä¸ªæ–‡ä»¶
                displayFile(currentFileIndex - 1);
            }
        }
    }
}

/* 5. è·å–é¡µé¢æºä»£ç çš„å‡½æ•°*/
async function getPageSource() {
    // è·å–å½“å‰é¡µé¢çš„å®Œæ•´HTML æºä»£ç  
    let pageSource = document.documentElement.outerHTML;
    // æ ¼å¼åŒ–HTMLï¼ˆç®€å•çš„ç¼©è¿›å¤„ç†ï¼‰ 
    pageSource = formatHTML(pageSource);
    return pageSource;
}

/* 6. æ ¼å¼åŒ–HTML çš„å‡½æ•°*/
function formatHTML(html) {
    let formatted = ''; 
    let indent = 0;
    const tab = '  '; // 2 ä¸ªç©ºæ ¼ä½œä¸ºç¼©è¿›
    html.split(/>\s*</).forEach(function(element) {
        if (element.match(/^\/\w/)) {
            // é—­åˆæ ‡ç­¾ 
            indent--;
        }
        formatted += tab.repeat(Math.max(0, indent)) + '<' + element + '>\n';
        if (element.match(/^<?\w[^>]*[^\/]$/) && !element.startsWith("!--")) {
            // å¼€å§‹æ ‡ç­¾ 
            indent++;
        }
    });
    return formatted.trim();
}

/* 7. åŠ è½½Prism.js çš„å‡½æ•°*/
async function loadPrism() {
    // åŠ è½½æ ¸å¿ƒåº“ 
    await loadScript('https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js');
    // åŠ è½½è‡ªåŠ¨åŠ è½½å™¨ 
    await loadScript('https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js');
}

/* 8. åŠ¨æ€åŠ è½½è„šæœ¬çš„å‡½æ•°*/
function loadScript(url) {
    return new Promise((resolve, reject) => {
        const script = document.createElement('script'); 
        script.src = url; 
        script.onload = resolve; 
        script.onerror = reject; 
        document.head.appendChild(script); 
    });
}

/* 9. æ˜¾ç¤ºä»£ç é«˜äº®çš„å‡½æ•°*/
function displayCode() {
    const container = document.getElementById('codeContainer'); 
    const language = detectLanguage(currentCode); 
    let codeHtml = `<pre><code class="language-${language}">${escapeHtml(currentCode)}</code></pre>`;
    container.innerHTML = codeHtml;
    // åº”ç”¨é«˜äº® 
    if (window.Prism) {
        Prism.highlightAll();
    }
    // åº”ç”¨å½“å‰å­—ä½“å¤§å° 
    applyFontSize();
}

/* 10. æ£€æµ‹ä»£ç è¯­è¨€çš„å‡½æ•°*/
function detectLanguage(code) {
    if (currentViewMode === 'page') {
        // é¡µé¢æºç ä½¿ç”¨HTML é«˜äº® 
        return 'html';
    }
    // æ£€æµ‹JavaScript 
    if (code.includes('const ') || code.includes('let ') || code.includes('function')) {
        return 'javascript';
    }
    // æ£€æµ‹JSON 
    if ((code.startsWith('{') && code.endsWith('}')) || (code.startsWith('[') && code.endsWith(']'))) { 
        return 'json';
    }
    // é»˜è®¤ä¸ºJavaScript 
    return 'javascript';
}

/* 11. åˆ‡æ¢é«˜äº®ä¸»é¢˜çš„å‡½æ•°*/
async function cycleTheme() {
    currentThemeIndex = (currentThemeIndex + 1) % themes.length; 
    await applyTheme(currentThemeIndex); 
    showToast(`å·²åˆ‡æ¢åˆ°: ${themes[currentThemeIndex].name}`);
    // é‡æ–°åº”ç”¨é«˜äº® 
    if (window.Prism && currentCode) {
        displayCode();
    }
}

/* 12. åº”ç”¨ä¸»é¢˜çš„å‡½æ•°*/
async function applyTheme(index) {
    const theme = themes[index]; 
    const themeLink = document.getElementById('prism-theme'); 
    themeLink.href = `https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/${theme.url}`;
}

/* 13. è°ƒæ•´å­—ä½“å¤§å°çš„å‡½æ•°*/
function adjustZoom(delta) {
    // å°†delta è½¬æ¢ä¸ºrem å•ä½ï¼ˆå‡è®¾åŸºå‡†ä¸º16pxï¼Œdelta ä¸ºpx å€¼ï¼‰ 
    const deltaInRem = delta / 16; 
    currentFontSize = Math.max(0.75, Math.min(1.625, currentFontSize + deltaInRem));
    applyFontSize();
    showToast(`å­—ä½“å¤§å°: ${(currentFontSize * 16).toFixed(0)}px`);
}

/* 14. åº”ç”¨å­—ä½“å¤§å°çš„å‡½æ•°*/
function applyFontSize() {
    document.documentElement.style.setProperty('--base-font-size', currentFontSize + 'rem');
    const codeElements = document.querySelectorAll('pre[class*="language-"]');
    codeElements.forEach(element => {
        element.style.fontSize = currentFontSize + 'rem'; 
    });
}

/* 15. é‡ç½®å­—ä½“å¤§å°çš„å‡½æ•°*/
function resetZoom() {
    currentFontSize = 1; // 1rem 
    applyFontSize(); 
    showToast('å­—ä½“å¤§å°å·²é‡ç½®');
}

/* 16. å¤åˆ¶ä»£ç çš„å‡½æ•°*/
function copyCode() {
    if (currentCode) {
        navigator.clipboard.writeText(currentCode).then(() => {
            showToast('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'); 
        }).catch(() => {
            showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å¤åˆ¶'); 
        });
    }
}

/* 17. HTML è½¬ä¹‰çš„å‡½æ•°*/
function escapeHtml(text) {
    const map = {
        '&': '&amp;', 
        '<': '&lt;', 
        '>': '&gt;', 
        '"': '&quot;', 
        "'": '&#039;'
    }; 
    return text.replace(/[&<>"']/g, m => map[m]);
}

/* 18. æ˜¾ç¤ºæç¤ºæ¶ˆæ¯çš„å‡½æ•°*/
function showToast(message) {
    const toast = document.getElementById('toast'); 
    toast.textContent = message; 
    toast.classList.add('show'); 
    setTimeout(() => {
        toast.classList.remove('show'); 
    }, 3000);
}

/* 19. é”®ç›˜äº‹ä»¶ç›‘å¬å‡½æ•°*/
document.addEventListener('keydown', function (e) {
    // Ctrl+Plus/Minus è°ƒæ•´å­—ä½“å¤§å° 
    if (e.ctrlKey || e.metaKey) {
        if (e.key === '+' || e.key === '=') {
            e.preventDefault(); 
            adjustZoom(2);
        } else if (e.key === '-' || e.key === '_') {
            e.preventDefault(); 
            adjustZoom(-2);
        } else if (e.key === '0') {
            e.preventDefault(); 
            resetZoom();
        } else if (e.key === 't' || e.key === 'T') {
            e.preventDefault(); 
            cycleTheme();
        }
    } else {
        // æ–‡ä»¶åˆ‡æ¢å¿«æ·é”®
        if (e.key === 'ArrowLeft' && currentFileIndex > 0) {
            e.preventDefault();
            displayFile(currentFileIndex - 1);
        } else if (e.key === 'ArrowRight' && currentFileIndex < fileContents.length - 1) {
            e.preventDefault();
            displayFile(currentFileIndex + 1);
        } else if (e.key >= '1' && e.key <= '4') {
            e.preventDefault();
            const index = parseInt(e.key) - 1;
            if (index < fileContents.length) {
                displayFile(index);
            }
        }
    }
});
</script> 
</body> 
</html>
