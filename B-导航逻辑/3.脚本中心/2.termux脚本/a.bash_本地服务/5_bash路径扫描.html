<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bash ä»£ç æŸ¥çœ‹å™¨</title>
    
        <!-- prism.js è¯­æ³•é«˜äº®   -->
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/1.prism-css-ç™½è‰²ä¸»é¢˜.js"></script>   
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/prism-core.min.js"></script>    <!-- æ ¸å¿ƒæ–‡ä»¶ -->
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/prism-bash.min.js"></script>   <!-- Bashè¯­è¨€æ”¯æŒ -->
    
    <style>
        /* 1. åŸºç¡€æ ·å¼é‡ç½® */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* 2. é¡µé¢ä¸»ä½“æ ·å¼ */
        body { 
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace; 
            background: #ffffff; 
            color: #2c3e50; 
            line-height: 1.6; 
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }
        
        /* 3. ä»£ç å®¹å™¨ */
        .code-container { 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
        }
        
        /* 4. ä»£ç å¤´éƒ¨ - å‡å°‘padding */
        .code-header { 
            background: linear-gradient(90deg, #f8f9fa 0%, #e9ecef 100%); 
            padding: 8px 12px; 
            border-bottom: 1px solid #dee2e6; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            flex-shrink: 0;
        }
        
        /* 5. ä»£ç æ ‡é¢˜ - å‡å°å­—ä½“ */
        .code-title { 
            color: #6c757d; 
            font-size: 12px; 
            font-weight: 600; 
            letter-spacing: 0.5px; 
        }
        
        /* 6. æŒ‰é’®ç»„ */
        .button-group {
            display: flex;
            gap: 6px;
        }
        
        /* 7. å¤åˆ¶æŒ‰é’® - å‡å°padding */
        .copy-btn { 
            color: white; 
            border: none; 
            padding: 4px 10px; 
            border-radius: 4px; 
            cursor: pointer; 
            font-size: 11px; 
            font-weight: 600; 
            transition: all 0.3s ease; 
            display: flex; 
            align-items: center; 
            gap: 4px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            box-shadow: 0 2px 4px rgba(118, 75, 162, 0.3); 
        }
        
        /* 8. å¤åˆ¶æŒ‰é’®æ‚¬åœæ•ˆæœ */
        .copy-btn:hover { 
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); 
            transform: scale(1.05); 
        }
        
        /* 9. ä»£ç å†…å®¹åŒºåŸŸ - å‡å°‘padding */
        .code-content { 
            flex: 1; 
            overflow: auto; 
            background: #f8f9fa; 
            padding: 10px; 
        }
        
        /* 10. ä»£ç å—æ ·å¼ - å‡å°å­—ä½“ */
        pre { 
            margin: 0; 
            padding: 0; 
            background: transparent; 
            font-size: 12px; 
            line-height: 1.4; 
        }
        
        /* 11. ä»£ç æ ·å¼ */
        code { 
            font-family: inherit; 
            white-space: pre; 
        }
    </style>
</head>
<body>
    <div class="code-container">
        <div class="code-header">
            <span class="code-title">scan.sh</span>
            <div class="button-group">
                <button class="copy-btn" onclick="copyCode()">
                    <span>ğŸ“‹</span>
                    <span>å¤åˆ¶</span>
                </button>
            </div>
        </div>
        <div class="code-content">
            <pre><code class="language-bash">#!/data/data/com.termux/files/usr/bin/bash
# 1. è„šæœ¬åç§°ï¼šscan.sh â€”â€” Termux äº¤äº’å¼ç›®å½•å±‚çº§æ‰«æå™¨
# 2. ä¾èµ–ï¼štreeï¼ˆå¦‚æœªå®‰è£…è¯·å…ˆ pkg install treeï¼‰

# 3. è®¾ç½® Bash ä¸¥æ ¼æ¨¡å¼ï¼šé‡åˆ°é”™è¯¯ç«‹å³é€€å‡ºã€ä½¿ç”¨æœªå®šä¹‰å˜é‡æ—¶æŠ¥é”™ã€ç®¡é“å‡ºé”™ä¹Ÿæ•´ä½“å¤±è´¥
set -euo pipefail

# 4. å®šä¹‰é¢œè‰²å‡½æ•°ï¼Œè®©è¾“å‡ºæ›´é†’ç›®
red()    { printf '\033[31m%b\033[0m\n' "$1"; }
green()  { printf '\033[32m%b\033[0m\n' "$1"; }
yellow() { printf '\033[33m%b\033[0m\n' "$1"; }

# 5. æ£€æŸ¥ tree æ˜¯å¦å·²å®‰è£…
if ! command -v tree >/dev/null 2>&1; then
  red "é”™è¯¯ï¼šæœªæ£€æµ‹åˆ° tree å‘½ä»¤ï¼Œè¯·å…ˆæ‰§è¡Œ pkg install tree"
  exit 1
fi

# 6. ä¸»é€»è¾‘å°è£…æˆå‡½æ•°ï¼Œæ–¹ä¾¿åç»­å¤ç”¨
main() {
  # 7. å‹å¥½æç¤ºï¼šè®©ç”¨æˆ·è¾“å…¥å¾…æ‰«æç›®å½•
  echo
  yellow "=== Termux ç›®å½•æ‰«æå™¨ ==="
  read -rp "è¯·è¾“å…¥æƒ³è¦æ‰«æçš„ç›®å½•ï¼ˆç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„ï¼‰: " target_dir

  # 8. æŠŠç”¨æˆ·è¾“å…¥çš„è·¯å¾„è½¬æ¢æˆç»å¯¹è·¯å¾„ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦å­˜åœ¨
  target_dir=$(realpath -m "$target_dir" 2>/dev/null || readlink -f "$target_dir" 2>/dev/null || echo "$target_dir")
  if [[ ! -d $target_dir ]]; then
    red "é”™è¯¯ï¼šç›®å½•ä¸å­˜åœ¨ â†’ $target_dir"
    exit 1
  fi

  # 9. è®©ç”¨æˆ·é€‰æ‹©æ‰«æå±‚çº§ï¼ˆç©ºå›è½¦é»˜è®¤å…¨éƒ¨å±‚çº§ï¼‰
  read -rp "è¯·é€‰æ‹©æ‰«æå±‚çº§ï¼ˆæ•°å­—ï¼Œç›´æ¥å›è½¦=å…¨éƒ¨å±‚çº§ï¼‰: " depth
  if [[ -z $depth ]]; then
    depth_flag=""
  elif [[ $depth =~ ^[0-9]+$ ]]; then
    depth_flag="-L $depth"
  else
    red "é”™è¯¯ï¼šå±‚çº§å¿…é¡»æ˜¯æ•°å­—"
    exit 1
  fi

  # 10. æ‰§è¡Œ tree å¹¶é«˜äº®è¾“å‡º
  green "æ‰«æç»“æœï¼š"
  echo "----------------------------------------"
  tree -C $depth_flag "$target_dir"
  echo "----------------------------------------"
}

# 11. è°ƒç”¨ä¸»å‡½æ•°
main</code></pre>
        </div>
    </div>

    <script>
        // 1. é¡µé¢åŠ è½½å®Œæˆååº”ç”¨è¯­æ³•é«˜äº®
        document.addEventListener('DOMContentLoaded', function() {
            Prism.highlightAll();
        });
        
        // 2. å¤åˆ¶ä»£ç ï¼ˆåªå¤åˆ¶è„šæœ¬å†…å®¹ï¼‰
        function copyCode() {
            // ç²¾ç¡®é€‰æ‹©ä»£ç å†…å®¹ï¼Œæ’é™¤HTMLæ ‡ç­¾
            const codeElement = document.querySelector('code.language-bash');
            if (!codeElement) {
                console.error('æœªæ‰¾åˆ°ä»£ç å…ƒç´ ');
                return;
            }
            
            // è·å–çº¯æ–‡æœ¬å†…å®¹ï¼Œå»é™¤å¯èƒ½çš„HTMLå®ä½“
            let codeContent = codeElement.textContent || codeElement.innerText;
            
            // æ¸…ç†å†…å®¹ï¼šå»é™¤å‰åç©ºç™½ï¼Œä½†ä¿ç•™å†…éƒ¨æ ¼å¼
            codeContent = codeContent.trim();
            
            // è°ƒè¯•ä¿¡æ¯
            console.log('å¤åˆ¶çš„ä»£ç é•¿åº¦:', codeContent.length);
            console.log('å¤åˆ¶çš„å‰50ä¸ªå­—ç¬¦:', codeContent.substring(0, 50));
            
            // ç›´æ¥åœ¨å½“å‰é¡µé¢å¤åˆ¶ï¼Œä¸é€šè¿‡çˆ¶é¡µé¢
            navigator.clipboard.writeText(codeContent).then(() => {
                // æ˜¾ç¤ºæˆåŠŸæç¤º
                showCopySuccess();
                
                // åŒæ—¶é€šçŸ¥çˆ¶é¡µé¢ï¼ˆå¯é€‰ï¼‰
                window.parent.postMessage({
                    type: 'copySuccess',
                    content: 'ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'
                }, '*');
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                // é™çº§æ–¹æ¡ˆï¼šåˆ›å»ºä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
                fallbackCopy(codeContent);
            });
        }
        
        // 3. é™çº§å¤åˆ¶æ–¹æ¡ˆ
        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopySuccess();
                }
            } catch (err) {
                console.error('é™çº§å¤åˆ¶å¤±è´¥:', err);
            }
            
            document.body.removeChild(textArea);
        }
        
        // 4. æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
        function showCopySuccess() {
            // åˆ›å»ºæç¤ºå…ƒç´ 
            const toast = document.createElement('div');
            toast.textContent = 'âœ… ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿';
            toast.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(40, 167, 69, 0.9);
                color: white;
                padding: 8px 16px;
                border-radius: 4px;
                font-size: 12px;
                z-index: 1000;
                pointer-events: none;
            `;
            
            document.body.appendChild(toast);
            
            // 1.5ç§’åç§»é™¤æç¤º
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 1500);
        }
        
        // 5. ç›‘å¬æ¥è‡ªä¸»é¡µé¢çš„ç¼©æ”¾æ¶ˆæ¯
        window.addEventListener('message', function(event) {
            if (event.data.type === 'zoom') {
                // åº”ç”¨ç¼©æ”¾åˆ°iframeå†…éƒ¨
                applyIframeZoom(event.data.zoomLevel);
            }
        });

        // 6. åº”ç”¨iframeå†…éƒ¨ç¼©æ”¾
        function applyIframeZoom(zoomLevel) {
            const root = document.documentElement;
            root.style.fontSize = `${zoomLevel / 100}rem`;
            
            // ç‰¹æ®Šå¤„ç†ä»£ç å—
            const codeElements = document.querySelectorAll('pre, code');
            codeElements.forEach(element => {
                element.style.fontSize = `${zoomLevel / 100}rem`;
            });
            
            console.log(`iframeç¼©æ”¾å·²åº”ç”¨åˆ°: ${zoomLevel}%`);
        }

        // 7. é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åº”ç”¨è¯­æ³•é«˜äº®
            Prism.highlightAll();
            
            // é€šçŸ¥ä¸»é¡µé¢iframeå·²å‡†å¤‡å¥½æ¥æ”¶ç¼©æ”¾æ¶ˆæ¯
            window.parent.postMessage({
                type: 'iframeReady'
            }, '*');
        });
    </script>
</body>
</html>
