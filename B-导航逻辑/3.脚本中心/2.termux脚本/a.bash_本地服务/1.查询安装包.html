<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŸ¥è¯¢å®‰è£…åŒ…</title>
    
        <!-- prism.js è¯­æ³•é«˜äº®   -->
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/1.prism-css-ç™½è‰²ä¸»é¢˜.js"></script>   
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/prism-core.min.js"></script>    <!-- æ ¸å¿ƒæ–‡ä»¶ -->
      <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶ç¼“å­˜-CDN/1.prismä»£ç é«˜äº®/prism-bash.min.js"></script>   <!-- Bashè¯­è¨€æ”¯æŒ -->
      
     <!-- å¼•å…¥ç¼©æ”¾æ’ä»¶ -->
    <script src="/A2_å…¨å±€ä¸­å¿ƒ/B_æ’ä»¶å·¥å…·/3.æ’ä»¶_å­—ä½“ç¼©æ”¾.js"></script> 

    <style>
        /* ===== 1. å…¨å±€é‡ç½® ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* ===== 2. é¡µé¢ä¸»ä½“ ===== */
        body { font-family: 'Consolas', 'Monaco', monospace; background: #1a1a1a; color: #f0f0f0; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        
        /* ===== 3. ä¸»å®¹å™¨ ===== */
        .main-container { flex: 1; display: flex; flex-direction: column; height: 100vh; }
        
        /* ===== 4. ä»£ç åŒºåŸŸ ===== */
        .code-section { flex: 1; min-height: 0; display: flex; flex-direction: column; }
        
        /* ===== 5. ä»£ç å¤´éƒ¨ ===== */
        .code-header { background: #2d2d2d; padding: 8px 15px; border-bottom: 1px solid #444; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
        
        /* ===== 6. ä»£ç æ ‡é¢˜ ===== */
        .code-title { font-size: 14px; color: #888; }
        
        /* ===== 7. å¤åˆ¶æŒ‰é’® ===== */
        .copy-btn { background: #4CAF50; color: white; border: none; padding: 4px 10px; border-radius: 3px; cursor: pointer; font-size: 11px; transition: all 0.2s; }
        .copy-btn:hover { background: #45a049; }
        
        /* ===== 8. ä»£ç æ˜¾ç¤ºåŒº ===== */
        pre { flex: 1; background: #1e1e1e; color: #d4d4d4; padding: 10px; overflow: auto; font-size: 12px; line-height: 1.4; margin: 0; }
        
        /* ===== 9. é…ç½®åŒºåŸŸ ===== */
        .config-section { background: #2d2d2d; border-top: 1px solid #444; padding: 8px 15px; max-height: 25vh; overflow-y: auto; flex-shrink: 0; }
        
        /* ===== 10. é…ç½®ç½‘æ ¼å¸ƒå±€ ===== */
        .config-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 11px; }
        
        /* ===== 11. é…ç½®é¡¹ ===== */
        .config-item { display: flex; align-items: center; padding: 3px 8px; background: #3a3a3a; border-radius: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .config-item:hover { background: #4a4a4a; }
        
        /* ===== 12. çŠ¶æ€å›¾æ ‡ ===== */
        .status-ok { color: #4CAF50; margin-right: 5px; }
        .status-error { color: #f44336; margin-right: 5px; }
        
        /* ===== 13. é…ç½®æ ‡ç­¾ ===== */
        .config-label { color: #888; margin-right: 8px; font-size: 10px; }
        
        /* ===== 14. å“åº”å¼é€‚é… ===== */
        @media (max-width: 768px) { .config-grid { grid-template-columns: 1fr; } .config-section { max-height: 30vh; } }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- ä»£ç åŒºåŸŸ - å 90%ç©ºé—´ -->
        <div class="code-section">
            <div class="code-header">
                <span class="code-title">ğŸ“„ æŸ¥è¯¢å®‰è£…åŒ….bash</span>
                <button class="copy-btn" onclick="fn01_copyScript()">ğŸ“‹ å¤åˆ¶</button>
            </div>
            <pre><code class="language-bash" id="fullScript"></code></pre>
        </div>

        <!-- é…ç½®åŒºåŸŸ - ç´§å‡‘æ˜¾ç¤º -->
        <div class="config-section">
            <div class="config-grid">
                <div>
                    <span class="config-label">ğŸ“¦ æ£€æµ‹åŒ…:</span>
                    <div id="checkListContent"></div>
                </div>
                <div>
                    <span class="config-label">ğŸ“ æ‰«æç›®å½•:</span>
                    <div id="dirListContent"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== 1. é…ç½®æ•°æ® =====
        const configData = {
            CHECK_LIST: ["android-sdk-build-tools", "openjdk-17", "aapt", "apksigner", "dx", "ecj"],
            MANUAL_DIR: ["$PREFIX/bin", "$PREFIX/share", "$PREFIX/opt", "/system/bin", "/system/xbin"]
        };

        // ===== 2. è„šæœ¬å†…å®¹ =====
        const bashScript = `#!/bin/bash
# ---------- å¯æ”¹åŒºåŸŸ ----------
CHECK_LIST=(
  android-sdk-build-tools
  openjdk-17
  aapt
  apksigner
  dx
  ecj
)
# ---------- ä¸‹é¢åˆ«åŠ¨ ----------
for name in "\${CHECK_LIST[@]}"; do
  if dpkg -l | awk '\$2==pkg && \$1=="ii"{print \$3}' pkg="\$name" | grep -q .; then
    echo "âœ… \$name: å®˜æ–¹åŒ… \$(dpkg -l | awk '\$2==pkg && \$1=="ii"{print \$3}' pkg="\$name")"
    continue
  fi
  found="" path_list=""
  MANUAL_DIR=(
    "\$PREFIX/bin"
    "\$PREFIX/share"
    "\$PREFIX/opt"
    /system/bin
    /system/xbin
  )
  for dir in "\${MANUAL_DIR[@]}"; do
    if [[ -e "\$dir/\$name" || -e "\$dir/\${name}.jar" || -e "\$dir/\${name}.sh" ]]; then
      found="yes"
      path_list="\$path_list\$dir/\$name "
    fi
  done
  if command -v "\$name" >/dev/null 2>&1; then
    real_path=\$(command -v "\$name")
    found="yes"
    path_list="\$path_list\$real_path "
  fi
  if [[ \$found == "yes" ]]; then
    printf "âœ… %s: æ‰‹åŠ¨å®‰è£…ï¼Œè·¯å¾„ï¼š" "\$name"
    printf "%s " \$(printf "%s" "\$path_list" | tr ' ' '\\n' | sort -u)
    echo
  else
    echo "âŒ \$name: æœªå®‰è£…"
  fi
done`;

        // ===== 3. åˆå§‹åŒ–é¡µé¢ =====
        function fn01_initPage() {
            fn02_displayConfig();
            fn03_displayScript();
        }

        // ===== 4. æ˜¾ç¤ºé…ç½® =====
        function fn02_displayConfig() {
            // æ£€æµ‹åŒ…åˆ—è¡¨
            const checkHtml = configData.CHECK_LIST.map(item => 
                `<div class="config-item"><span class="status-ok">âœ“</span>${item}</div>`
            ).join('');
            document.getElementById('checkListContent').innerHTML = checkHtml;

            // æ‰«æç›®å½•åˆ—è¡¨
            const dirHtml = configData.MANUAL_DIR.map(dir => 
                `<div class="config-item"><span class="status-ok">ğŸ“</span><code>${dir}</code></div>`
            ).join('');
            document.getElementById('dirListContent').innerHTML = dirHtml;
        }

        // ===== 5. æ˜¾ç¤ºè„šæœ¬ =====
        function fn03_displayScript() {
            const scriptElement = document.getElementById('fullScript');
            scriptElement.textContent = bashScript;
            if (typeof Prism !== 'undefined') {
                Prism.highlightElement(scriptElement);
            }
        }

        // ===== 6. å¤åˆ¶è„šæœ¬ =====
        function fn01_copyScript() {
            const content = document.getElementById('fullScript').textContent;
            navigator.clipboard.writeText(content).then(() => {
                fn04_showToast('âœ… å·²å¤åˆ¶');
            }).catch(() => {
                document.execCommand('copy');
                fn04_showToast('âœ… å·²å¤åˆ¶');
            });
        }

        // ===== 7. æ˜¾ç¤ºæç¤º =====
        function fn04_showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed; bottom: 20px; right: 20px; 
                background: #4CAF50; color: white; 
                padding: 8px 15px; border-radius: 4px; 
                font-size: 12px; z-index: 10000;
                animation: fadeInOut 2s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => document.body.removeChild(toast), 2000);
        }

        // ===== 8. å¤–éƒ¨åŠ è½½ =====
        async function fn05_loadExternal() {
            try {
                const response = await fetch('check_packages.sh');
                const scriptContent = await response.text();
                document.getElementById('fullScript').textContent = scriptContent;
                if (typeof Prism !== 'undefined') {
                    Prism.highlightElement(document.getElementById('fullScript'));
                }
                fn04_showToast('âœ… å¤–éƒ¨æ–‡ä»¶å·²åŠ è½½');
            } catch (error) {
                console.log('ä½¿ç”¨å†…ç½®é…ç½®');
            }
        }

        // ===== 9. æ·»åŠ åŠ¨ç”» =====
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translateY(10px); }
                20% { opacity: 1; transform: translateY(0); }
                80% { opacity: 1; transform: translateY(0); }
                100% { opacity: 0; transform: translateY(-10px); }
            }
        `;
        document.head.appendChild(style);

        // ===== 10. é¡µé¢åŠ è½½ =====
        document.addEventListener('DOMContentLoaded', fn01_initPage);
    </script>
</body>
</html>
